# 學習演算法系統設計

## 📚 理論基礎

本系統採用 **SM-2（SuperMemo 2）間隔重複演算法**，這是經過科學驗證的記憶增強方法。

### 核心概念

1. **間隔重複（Spaced Repetition）**
   - 基於遺忘曲線理論（Ebbinghaus, 1885）
   - 在記憶即將遺忘前進行複習，效果最佳
   - 隨著熟練度增加，複習間隔逐漸延長

2. **主動回憶（Active Recall）**
   - 測驗效應（Testing Effect）：測試本身就是最好的學習方式
   - 比被動閱讀更有效的記憶固化方法

3. **困難度調整**
   - 根據學習者表現動態調整複習難度
   - 確保學習者處於「最近發展區」（Zone of Proximal Development）

## 🎯 SM-2 演算法實現

### 參數定義

- **EF (Easiness Factor)**: 易度因子，範圍 1.3-2.5，預設 2.5
- **Repetitions**: 連續正確次數
- **Interval**: 下次複習間隔（天數）
- **Quality**: 回答品質評分 0-5

### 熟練度分級對應

| 用戶評分 | 說明 | Quality 值 | 效果 |
|---------|------|-----------|------|
| 1 - 完全不會 | 完全忘記或不認識 | 0-1 | 重置學習進度 |
| 2 - 有點印象 | 有模糊印象但不確定 | 2 | 重置學習進度 |
| 3 - 基本熟悉 | 想了一下記起來 | 3 | 保持進度，短間隔 |
| 4 - 非常熟練 | 立即想起，完全掌握 | 5 | 進度+1，長間隔 |

### 演算法流程

```
IF Quality < 3:
  Repetitions = 0
  Interval = 1 day
ELSE:
  IF Repetitions = 0:
    Interval = 1 day
  ELSE IF Repetitions = 1:
    Interval = 6 days
  ELSE:
    Interval = Previous_Interval * EF
  Repetitions = Repetitions + 1

EF = EF + (0.1 - (5 - Quality) * (0.08 + (5 - Quality) * 0.02))
IF EF < 1.3:
  EF = 1.3

Next_Review_Date = Today + Interval
```

## 📊 優先級系統

系統根據以下因素計算學習優先級：

### Priority 1 - 最高優先（立即需要複習）
- 測驗中答錯的單字（failed_post_test）
- **理由**: 剛測驗失敗表示記憶不牢固，需要立即加強

### Priority 2 - 高優先（需要加強）
- EF ≤ 1.6 的單字（困難單字）
- **理由**: 易度因子低表示這個單字對學習者來說很困難

### Priority 3 - 中優先（到期複習）
- 已超過 next_review_at 時間的單字
- **理由**: 根據 SM-2，這些單字記憶正在衰退

### Priority 4 - 低優先（新單字或熟練）
- repetitions < 2 的單字（新學習）
- 其他情況
- **理由**: 新單字或已經熟練掌握的單字

## 🔄 學習流程設計

### 1. Study 模式（主動學習）

```
選擇方言 
  ↓
載入 10 個推薦單字（按優先級排序）
  ↓
逐一展示字卡
  ↓
用戶評估熟練度（1-4）
  ↓
更新 SM-2 參數（EF, Repetitions, Interval）
  ↓
學習 10 個後 → 自動跳轉 Test 模式
```

**優勢**：
- 循序漸進，避免壓力過大
- 即時反饋，增強記憶
- 自動調度複習時間

### 2. Test 模式（主動回憶）

```
載入測驗題目（同樣按優先級）
  ↓
拼寫測驗（輸入阿美語單字）
  ↓
計算相似度（85% 視為正確）
  ↓
標記為 isPostTest=true
  ↓
答錯的單字 → Priority 1（最高優先）
  ↓
顯示詳細結果和分數
```

**優勢**：
- 測驗效應強化記憶
- 拼寫訓練輸出能力
- 錯誤單字優先複習

## 🧠 記憶科學依據

### 1. 遺忘曲線（Forgetting Curve）
- **發現者**: Hermann Ebbinghaus (1885)
- **核心**: 記憶在學習後迅速衰退，但通過間隔複習可以減緩
- **應用**: SM-2 的間隔時間設計基於此理論

### 2. 間隔效應（Spacing Effect）
- **發現者**: Cepeda et al. (2006)
- **核心**: 分散學習比集中學習效果更好
- **應用**: 每次學習 10 個單字，避免疲勞

### 3. 測驗效應（Testing Effect）
- **發現者**: Roediger & Karpicke (2006)
- **核心**: 測驗比重複閱讀更能增強長期記憶
- **應用**: 學習後立即測驗，強化記憶固化

### 4. 生成效應（Generation Effect）
- **發現者**: Slamecka & Graf (1978)
- **核心**: 主動生成答案比被動接收效果更好
- **應用**: 拼寫測驗要求主動回憶和輸出

## 📈 系統優化建議

### 短期優化（已實現）
- ✅ SM-2 演算法核心實現
- ✅ 4 級熟練度評分系統
- ✅ 優先級排序系統
- ✅ 學習 → 測驗自動流程
- ✅ 測驗結果追蹤

### 中期優化（建議實現）
- [ ] 每日學習目標設定
- [ ] 學習統計圖表（遺忘曲線可視化）
- [ ] 連續學習天數獎勵
- [ ] 錯誤單字專項練習
- [ ] 語音發音功能

### 長期優化（未來方向）
- [ ] 機器學習個性化推薦
- [ ] 上下文例句學習
- [ ] 社交學習功能
- [ ] 多模態學習（聽、說、讀、寫）
- [ ] 自適應難度調整

## 📊 效果評估指標

### 學習效率指標
- **保留率**: 7 天後能記住的單字百分比
- **學習速度**: 達到熟練所需的複習次數
- **遺忘率**: 已學習單字被遺忘的比例

### 用戶參與指標
- **日活躍度**: 每日學習時間
- **完成率**: 開始學習的完成百分比
- **測驗表現**: 平均測驗分數趨勢

## 🔬 參考文獻

1. Wozniak, P. A. (1990). "SuperMemo 2 Algorithm"
2. Ebbinghaus, H. (1885). "Memory: A Contribution to Experimental Psychology"
3. Cepeda, N. J., et al. (2006). "Distributed practice in verbal recall tasks"
4. Roediger, H. L., & Karpicke, J. D. (2006). "Test-enhanced learning"
5. Slamecka, N. J., & Graf, P. (1978). "The generation effect"

---

**最後更新**: 2025年12月28日
